<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>点击就行</title>
        <style>
            canvas{
                position: absolute;
                top:5px;
                left:5px;
                border: red solid 1px;
            }
            #yuantu{
                position: absolute;
                top:5px;
                left:5px;
                z-index: -2;
            }
            #xuanse{
                position:fixed; 
				left: 5px; 
				top: 500px; 
				background: #FC6; 
				border:1px solid #F90; 
            }
            #placeholder{
                border: green solid 3px;
            }
        </style>
    </head>
    <body>
        <p>
            <canvas id="canvas" width="350" height="490">你的辣鸡浏览器并不支持canvas</canvas>
            <img id="yuantu" src="girl.jpg" width="350" height="490" />
        </p>
        <p>选择填充的树皮，点击区域作画</p>
        <div id="xuanse">
        <div id="dangqian">
            <img id="placeholder" src="#" width="35" height="49" alt="xianzai">
        </div>
        <div>
                <img src="树皮纹理-02.png" width="35" height="49" alt="" onclick="huan(this)" onload="huayuantu()"/>
                <img src="树皮纹理-03-2.png" width="35" height="49" alt="" onclick="huan(this)"/> 
                <img src="树皮纹理-04.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-05-2.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-06-2.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-07.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-08.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-09.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-10.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-11.png" width="35" height="49" alt="" onclick="huan(this)"/>
            </div>
            <div>
                <img src="树皮纹理-12.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-13.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-14.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-15.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-16.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-17.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-18.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-19.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-20.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-21.png" width="35" height="49" alt="" onclick="huan(this)"/>
            </div>
            <div>
                <img src="树皮纹理-22.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-23.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-24.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-25.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-26.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-27.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-28.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-29.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-30.png" width="35" height="49" alt="" onclick="huan(this)"/>
                <img src="树皮纹理-32.png" width="35" height="49" alt="" onclick="huan(this)"/>
            </div>
        </div>
        <script type="text/javascript">
        var hair=[140,143,135,136,133,131,130,124,124,123,119,118,117,112,119,107,121,102,125,100,129,96,132,92,134,86,134,82,136,77,138,81,138,89,142,92,145,92,148,91,148,85,149,79,152,80,152,84,156,90,158,91,162,92,166,91,172,91,173,83,175,77,176,77,178,80,179,83,179,87,183,90,188,91,193,90,198,90,202,88,203,83,204,79,207,81,207,84,208,87,210,92,214,95,218,97,221,98,223,103,222,106,226,106,229,108,230,111,229,116,227,120,225,123,222,126,218,128,217,133,215,137,213,141,218,141,224,140,229,138,234,136,238,133,241,129,243,124,243,116,242,109,240,103,238,95,234,86,229,79,226,73,222,66,216,58,210,51,201,45,193,42,182,41,175,42,165,44,157,44,148,48,142,52,136,56,130,62,125,70,122,76,119,83,116,90,115,98,113,105,112,114,112,120,113,127,115,134,120,139,126,142,133,144];

        var zuoyilin=[139,171,146,168,151,166,161,163,164,166,169,170,174,174,179,177,180,184,176,189,172,196,166,196,160,196,153,191,147,185,138,177];

        var youyilin=[185,178,190,174,193,170,197,166,194,161,198,161,203,164,209,168,216,171,222,175,224,178,222,181,217,186,211,190,206,194,198,196,192,196,188,191,185,184];

        var zuoxiukou=[79,257,83,253,87,247,90,247,94,256,98,261,103,268,106,270,112,274,116,277,116,280,112,284,107,288,103,287,97,283,91,278,86,273,81,266];

        var zuoxiu=[95,250,95,245,98,239,105,226,111,214,116,203,121,197,124,190,129,185,129,192,128,199,127,212,127,222,125,232,124,243,123,251,121,261,119,265,116,268,113,271,107,267,100,259];

        var zuoshang=[145,188,149,192,154,195,159,199,164,200,170,199,177,197,180,192,180,197,181,214,180,226,179,243,179,251,172,240,163,226,154,210];

        var zuoxia=[142,196,142,204,142,213,141,221,140,232,136,243,133,253,129,263,125,269,125,277,123,285,123,293,130,286,136,280,141,273,146,273,148,275,151,277,151,281,149,285,146,290,142,294,135,303,130,309,121,317,119,328,118,338,117,347,117,361,123,366,132,369,140,371,149,374,159,375,166,376,173,376,176,373,176,359,177,323,178,300,179,272,179,258];

        var dou=[116,307,123,299,130,293,137,286,143,277,146,278,145,283,140,290,136,296,131,303,125,309,120,312];

        var youshang=[183,189,183,201,185,212,185,221,187,231,187,239,188,252,188,265,205,286,212,284,222,282,232,279,236,278,237,273,233,264,230,254,229,243,227,232,225,221,224,212,223,200,221,187,217,191,212,194,207,198,201,199,196,199,189,197];

        var youxia=[191,276,191,285,191,292,192,304,191,313,192,326,193,343,194,358,196,370,199,379,208,379,219,378,228,377,234,376,240,375,245,374,253,372,257,369,256,362,254,350,252,338,250,327,245,329,242,332,236,333,228,333,222,333,216,326,214,317,211,309,210,303,205,291,196,282];

        var baogai=[208,291,218,288,226,285,234,283,241,281,244,285,245,289,243,296,240,298,238,302,230,304,222,303,215,302,210,297];

        var bao=[214,305,222,307,229,308,236,307,242,303,247,298,249,305,252,312,252,319,250,322,242,326,236,329,229,330,223,329,219,323,216,314];

        var youxiu=[236,190,235,203,236,215,237,221,238,235,241,247,242,254,243,266,247,275,251,282,256,287,266,282,278,274,280,270,263,236,249,209];

        var youxiukou=[250,291,255,292,261,289,268,285,274,281,280,277,285,272,287,276,290,280,288,284,286,288,280,294,273,297,268,300,261,302,256,301,252,298];

        var zuoxie=[122,474,135,465,139,461,139,455,139,452,147,451,156,451,163,452,163,458,162,464,161,469,160,473,138,474];

        var zuokujiao=[134,428,143,428,151,428,160,430,168,431,167,435,165,436,154,437,146,436,136,436];

        var youkujiao=[192,431,192,437,197,440,201,439,207,440,215,441,223,440,225,433,206,432];

        var youxie=[193,456,193,465,192,471,194,475,199,475,210,475,219,476,226,476,236,476,225,470,220,466,223,459,219,457];


        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var x0,y0;
        var x,y;
        var canvasImage = new Image();
        var drawimage = function(yizu) {
           ctx.save();
            ctx.beginPath();
            ctx.moveTo(yizu[0],yizu[1]);
		for(var i = 1;i < yizu.length;i+=2){
			x0 = yizu[i-1];
			y0 = yizu[i];
			ctx.lineTo(x0,y0);
		}
		ctx.lineTo(yizu[0],yizu[1]);
            ctx.closePath();
          ctx.clip();
          ctx.drawImage(canvasImage, 0, 0,350,490);
         ctx.restore();
        };
        function huan(tu){
            var wl = tu.getAttribute("src");
            document.getElementById("placeholder").src = wl;
            canvasImage.src=wl;
        };
        function ispointin(shuzu){
            ctx.beginPath();
            ctx.moveTo(shuzu[0],shuzu[1]);
            for(var i = 1;i<shuzu.length;i+=2){
                x0=shuzu[i-1];
                y0=shuzu[i];
                ctx.lineTo(x0,y0);
            }
            ctx.lineTo(shuzu[0],shuzu[1]);
            ctx.closePath();
            return ctx.isPointInPath(x,y);
            
        };
        canvas.onclick=function(e){
            e=e||event;
            x=e.clientX-canvas.offsetLeft;
            y=e.clientY-canvas.offsetTop;
            if(ispointin(hair)){drawimage(hair);}

            if(ispointin(zuoyilin)){drawimage(zuoyilin);}

            if(ispointin(youyilin)){drawimage(youyilin);}

            if(ispointin(zuoxiukou)){drawimage(zuoxiukou);}

            if(ispointin(zuoxiu)){drawimage(zuoxiu);}

            if(ispointin(zuoshang)){drawimage(zuoshang);}

            if(ispointin(zuoxia)){drawimage(zuoxia);}

            if(ispointin(dou)){drawimage(dou);}

            if(ispointin(youshang)){drawimage(youshang);}

            if(ispointin(youxia)){drawimage(youxia);}

            if(ispointin(baogai)){drawimage(baogai);}

            if(ispointin(bao)){drawimage(bao);}

            if(ispointin(youxiu)){drawimage(youxiu);}

            if(ispointin(youxiukou)){drawimage(youxiukou);}

            if(ispointin(zuoxie)){drawimage(zuoxie);}

            if(ispointin(zuokujiao)){drawimage(zuokujiao);}

            if(ispointin(youkujiao)){drawimage(youkujiao);}

            if(ispointin(youxie)){drawimage(youxie);}
        };
        function huayuantu(){
            var img=document.getElementById("yuantu");
            ctx.drawImage(img,0,0);
        }

        </script>
    </body>
</html>